<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
          <!--morrisJS-->
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
          <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
          <link href="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css" rel="stylesheet" />
    <!-- material icon -->
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" /> -->
    <!-- Font awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet" />  
    
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <title>Document</title>
</head>
<body>
    <script type="text/javascript">

function classy()
{
  var horizontalBarChart = new Chart(horizontalBarChartCanvas, {
   type: 'horizontalBar',
   data: {
		labels: ["Label 1", "Label 2", "Label 3", "Label 4", "Label 5", "Label 6", "Label 7","Label 8","Label 9"],
		datasets: [{
			label: 'Employee',
			backgroundColor: "#4fb37f",
			data: [12, 59, 5, 56, 58,12, 59, 87, 45],
		}, {
			label: 'Engineer',
			backgroundColor: "#f8cf47",
			data: [12, 59, 5, 56, 58,12, 59, 85, 23],
		}, {
			label: 'Government',
			backgroundColor: "#ec4c35",
			data: [12, 59, 5, 56, 58,12, 59, 65, 51],
		}],
	},   
  //  data: {
  //     labels: ["Label 1", "Label 2", "Label 3", "Label 4", "Label 5", "Label 6", "Label 7"],
  //     datasets: [{
  //        data: [2000, 4000, 6000, 8000, 10000, 12000, 14000],
  //        backgroundColor: ["#73BFB8", "#73BFB8", "#73BFB8", "#73BFB8", "#73BFB8", "#73BFB8", "#73BFB8"], 
  //     }]
  //  },
   options: {
    scales: {
      xAxes: [{
          stacked: true,
        }],
      yAxes: [{
          stacked: true
        }]
      },
      tooltips: {
        enabled: true
      },
      responsive: true,
      legend: {
         display: false,
         position: 'bottom',
         fullWidth: true,
         labels: {
           boxWidth: 10,
           padding: 50
         }
      },
      // scales: {
      //    yAxes: [{
      //      barPercentage: 0.75,
      //      gridLines: {
      //        display: true,
      //        drawTicks: true,
      //        drawOnChartArea: false
      //      },
      //      ticks: {
      //        fontColor: '#555759',
      //        fontFamily: 'Lato',
      //        fontSize: 11
      //      }
            
      //    }],
      //    xAxes: [{
      //        gridLines: {
      //          display: true,
      //          drawTicks: false,
      //          tickMarkLength: 5,
      //          drawBorder: false
      //        },
      //      ticks: {
      //        padding: 5,
      //        beginAtZero: true,
      //        fontColor: '#555759',
      //        fontFamily: 'Lato',
      //        fontSize: 11,
      //        callback: function(label, index, labels) {
      //         return label/1000;
      //        }
               
      //      },
      //       scaleLabel: {
      //         display: true,
      //         padding: 10,
      //         fontFamily: 'Lato',
      //         fontColor: '#555759',
      //         fontSize: 16,
      //         fontStyle: 700,
      //         labelString: 'Scale Label'
      //       },
           
      //    }]
      // }
   }
});


}

function sentiOverTime(id,scores)
{
  var densityCanvas = document.getElementById("sentiovertimeBarChart-"+id);
  Chart.defaults.global.defaultFontFamily = "sans-serif";

  console.log(scores["Positive"])
  console.log(scores["Neutral"])
  console.log(scores["Negative"])
  var posData = {
    label: 'Positive',
    data: scores["Positive"],
    backgroundColor: '#4fb37f',
    borderColor: '#4fb37f',
    yAxisID: "percentage"
  };
 
  var neuData = {
    label: 'Neutral',
    data: scores["Neutral"],
    backgroundColor: '#f8cf47',
    borderColor: '#f8cf47'
  };

  var negData = {
    label: 'Negative',
    data: scores["Negative"],
    backgroundColor: '#ec4c35',
    borderColor: '#ec4c35'
  };

  var allData = {
    labels: ["January", "February", "March", "April", "May", "June", "July", "October" ,"November", "December"],
    datasets: [posData, neuData, negData]
  };

  var chartOptions = {
    legend: {
      display: false
      },
    scales: {
      xAxes: [{
        barPercentage: .3,
        }],
      yAxes: [{
        id: "percentage"
        }]
    }

  };
 
  var barChart = new Chart(densityCanvas, {
    type: 'bar',
    data: allData,
    options: chartOptions
  });  
   
}

function sentiOverTime_DropCreate(timedata)
{
  for(let i=0;i<timedata.length; i++)
  {
    $("#sentiovertime_DropdownBox").append("<option value='"+timedata[i]+"'>"+timedata[i]+"</option>")
  }
}

function sentiOverTime_DropEvent(chart)
{
  $('#sentiovertime_DropdownBox').change(function(){
    data1 = {}
    data2 = {}
    labels = ["Positive","Neutral","Negative"]
    for(let i=0;i<labels.length;i++)
    {
      data1[labels[i]] = []
      data2[labels[i]] = []
      for(let j=0;j<10;j++){
        data1[labels[i]].push(Math.random());
        data2[labels[i]].push(Math.random());
      }
    }
    
    if($(this).val() == 2011)
    {
      chart.data.datasets[0].data = data1["Positive"]
      chart.data.datasets[1].data = data1["Neutral"]
      chart.data.datasets[2].data = data1["Negative"]      
    }
    else if($(this).val() == 2012)
    {
      chart.data.datasets[0].data = data2["Positive"]
      chart.data.datasets[1].data = data2["Neutral"]
      chart.data.datasets[2].data = data2["Negative"]   
    }
    console.log(data1)
    console.log(data2)
    chart.update()
  });
}


function timeBar(){
  var densityCanvas = document.getElementById("sentiovertimeBarChart");

Chart.defaults.global.defaultFontFamily = "sans-serif";
// Chart.defaults.global.defaultFontSize = 18;

var posData = {
  label: 'Positive',
  data: [10, 8, 5, 16, 3, 5, 7, 9.30,34,10],
  backgroundColor: '#4fb37f',
  borderColor: '#4fb37f',
  yAxisID: "percentage"
};
 
var neuData = {
  label: 'Neutral',
  data: [3.7, 8.9, 9.8, 3.7, 23.1, 9.0, 8.7, 11.0,23,20],
  backgroundColor: '#f8cf47',
  borderColor: '#f8cf47'
};

var negData = {
  label: 'Negative',
  data: [3.7, 8.9, 9.8, 3.7, 23.1, 9.0, 8.7, 11.0,30,10],
  backgroundColor: '#ec4c35',
  borderColor: '#ec4c35'
};
 
var allData = {
  labels: ["January", "February", "March", "April", "May", "June", "July", "October" ,"November", "December"],
  datasets: [posData, neuData, negData]
};
 
var chartOptions = {
  legend: {
            display: false
        },
  scales: {
    xAxes: [{
      barPercentage: .3,
      // categoryPercentage: 0.6

    }],
    yAxes: [{
      id: "percentage"
    }]
  }
};
 
var barChart = new Chart(densityCanvas, {
  type: 'bar',
  data: allData,
  options: chartOptions
});

return barChart
}        
        
function chartjsPie(){

var data1 = {
        labels: [
            "Red",
            "Yellow",
            "Green"
        ],
    datasets: [
        {
            data: [200, 50, 100],
                backgroundColor: [
                    "#FF7061",
                    "#fdf9d6",
                    "lightgreen"
                ],
            borderColor: ['red', '#ffc107', '#28a745'],
            borderWidth: 2,
            // hoverBorderColor: ['red', 'yellow', 'lightgreen'],
            hoverBackgroundColor: ['red', '#ffc107', '#28a745'],
            // hoverBorderWidth: 5,
        }]
    };

var hoverLabel = {
    id: "hoverLabel",
    afterDatasetsDraw(chart, args, options){
        var {ctx, chartArea: { left, right, top, bottom, width, height}} = chart;
        ctx.save();
        ctx.font = "bolder 60px Arial";
        ctx.fillStyle = "blue";
        ctx.fillText("Test", width/2, height/2)
    }
}

var promisedDeliveryChart = new Chart(document.getElementById('myChart1'), {
    type: 'doughnut',
    data: data1,
    options: {
        cutoutPercentage: 70,
        responsive: true,
        legend: {
            display: false
        }
    },
    plugins: [hoverLabel]
});

Chart.pluginService.register({
    beforeDraw: function(chart) {
        if(chart.chart.canvas.id === "myChart1") {
            var width = chart.chart.width,
                height = chart.chart.height,
                ctx = chart.chart.ctx;

            ctx.restore();
            var fontSize = (height / 114).toFixed(2);
            ctx.font = fontSize + "em Verdana";
            ctx.textBaseline = "middle";
            ctx.textColor = "red";
            var text = "0.75",
                textX = Math.round((width - 
            ctx.measureText(text).width) / 2),
                textY = height / 2;
            ctx.fillStyle = 'rgba(0, 0, 255, 1)';
            ctx.fillText(text, textX, textY);

            ctx.save();
        }
    }
});

}

function morrisjsPie()
{

    Morris.Donut({
  element: 'members-tickets',
//   labelColor: '#116FEC',
  
  resize: true,
  redraw: true,
 // text color
  // backgroundColor: '#333333', // border color
  data: [
    { label: '40%', value: -.45, color: 'yellow', labelColor: '#116FEC'},
    { label: '50%', value: -.45, color: 'green' }, 
    { label: '10%', value: -.45, color: 'red'}
]
  });

  $('#members-tickets').resize(function () {
  bar.redraw();
});
    
}

function chartjsBubble()
{   
    function calc(value){
      return (Math.log(value+1+1) / Math.LN10)*50;
    }

    dt = {"label":["Postive","Neutral","Negative"],
                    "mean":[.85,.13,.67],
                    "std":[.1,0,1.3],
                    "count":[163,37,60]}
                    // corporate the color here 

    var bg_color =  ["lightgreen", "#fdf9d6","#FF7061"]
    var border_color = ['#28a745', '#ffc107',"red" ]

    // bg_color =  ["#FF7061","#fdf9d6","lightgreen"]
    // border_color: ["red", '#ffc107', '#28a745']    

    new Chart(document.getElementById("bubble-chart"), {
    type: 'bubble',
    data: {
      datasets: [
        {
          label: dt["label"][0],
          backgroundColor: bg_color[0],
          borderColor: border_color[0],
          data: [{
            x: dt["mean"][0],
            y: dt["count"][0],
            // r: dt["std"][0]+1 * 10
            r: calc(dt["std"][0])
          }]
        }, {
          label: dt["label"][1],
          backgroundColor: bg_color[1],
          borderColor: border_color[1],
          data: [{
            x: dt["mean"][1],
            y: dt["count"][1],
            // r: dt["std"][1]*10+1 * 10
            r: calc(dt["std"][1])
          }]
        }, {
          label: dt["label"][2],
          backgroundColor: bg_color[2],
          borderColor: border_color[2],
          data: [{
            x: dt["mean"][2],
            y: dt["count"][2],
            // r: dt["std"][2]+1 * 10
            r: calc(dt["std"][2])
          }]
        },
      ]
    },
    options: {
        tooltips: {
          displayColors: false, //color box in tooltip
          callbacks: {
            // title: function(tooltipItem, data) {
            //     // return data['labels'][tooltipItem[0]['index']];
            //     return tooltipItems;
            // },
            title: function(context) {
                // return data['labels'][tooltipItem[0]['index']];
                // console.log(context)
                return dt["label"][context[0].datasetIndex];
            },

            label: function(context) {
                console.log(context)
                return "";
            },
            afterLabel: function(context) {
                return 'Mean : ' + dt["mean"][context.datasetIndex] +'\n' +
                       'Standard Deviation : ' + dt["std"][context.datasetIndex] +'\n' +
                       'Min : 1 \t Max : 2';
            }                                   
            // label: function(tooltipItem, data) {
            //     return data['labels'][tooltipItem['index']] + ': ' + data['datasets'][0]['data'][tooltipItem['index']] + '%';
            // }
          }
      },        
      legend: {
        labels : {
            // usePointStyle: true,
            // boxWidth : 20,
            boxWidth: 13,
            // boxHeight: 2,
        },
        display: false
      },    
      title: {
        display: false,
        text: 'Predicted world population (millions) in 2050'
      }, scales: {
        yAxes: [{ 
          scaleLabel: {
            display: true,
            labelString: "Freqeuncy"
          }
        }],
        xAxes: [{ 
          scaleLabel: {
            display: true,
            labelString: "Mean"
          }
        }]
      }
    }
});

}


window.onload=function(){
  // chartjsPie();
  morrisjsPie();
  chartjsBubble();
  var sentiOtime = timeBar();
  classy();
  sentiOverTime_DropEvent(sentiOtime);
  sentiOverTime_DropCreate([2011,2012])

  // data1 = {}
  // data2 = {}
  // labels = ["Positive","Neutral","Negative"]
  // for(let i=0;i<labels.length;i++)
  // {
  //   data1[labels[i]] = []
  //   data2[labels[i]] = []
  //   for(let j=0;j<10;j++){
  //     data1[labels[i]].push(Math.random());
  //     data2[labels[i]].push(Math.random());
  //   }
  // }

}



</script>
<style>
    @import url(https://fonts.googleapis.com/css?family=Open+Sans);

body{
    background-color: #f6f9fb;
    /* font-family: 'Montserrat' */
}
</style>

  <div class="container-fluid">




    <div class="row">
      <div class="col"> 
        <div class="card">
          <div class="card-body">
            <div class="row">
              <h5 class="card-title">Aespect: A1</h5>
                <div class="d-flex justify-content-around">
                  <div class="col-3 card rounded-0 h-100">
                  <span class="m-2" style="padding-left: 10px;">Sentiment</span>
                  <div style="height: 230px;" id="members-tickets"></div>
                  </div>  
                  <div class="col-5 card rounded-0 h-100">
                    <span class="m-2" style="padding-left: 10px;">Statistics</span>
                    <canvas id="bubble-chart" class="p-3" height="280"></canvas>
                  </div>  
                  <div class="col-4 card rounded-0 h-100">
                    <span class="m-2" style="padding-left: 10px;"><strong>Category</strong></span>
                    <canvas id="horizontalBarChartCanvas" class="p-3" height="250"></canvas>
                  </div>                   
                </div>
              </div>
              
              <div class="row h-100">
                <div class="d-flex justify-content-around">

                  <div class="col-4 card rounded-0 h-100">
                    <img src="https://www.pngkit.com/png/detail/936-9364760_transparent-word-cloud-png.png" alt="Transparent Word Cloud Png@pngkit.com">
                  </div>

                  <div class="col card rounded-0 m-0">
                    <div class="row m-2" style="margin: 0;">
                      <div class="col"><strong>Sentiment Ovetime</strong></div>
                      <div class="col d-flex justify-content-end">
                        <span>Filter by year: </span>
                        <select name="" id="sentiovertime_DropdownBox">
      
                        </select>
                      </div>
                    </div>
                      <canvas class=" p-4" id="sentiovertimeBarChart" height="240"></canvas> 
                  </div>

                </div> 
              </div>

              <!-- <div class="row card rounded-0 m-0 p-4">
                <div class="row" style="margin: 0;">
                  <div class="col"><strong>Sentiment Ovetime</strong></div>
                  <div class="col d-flex justify-content-end">
                    <select name="" id="sentiovertime_DropdownBox">

                    </select>
                  </div>
                </div>
                <canvas id="sentiovertimeBarChart" width="600" height="100"></canvas> 
              </div> -->

            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Overall Score</h5>
                    word cloud or any frequency chart goes here
                    try heatmap
                </div>
            </div>
        </div>
    </div>      
  </div>

</body>
</html>